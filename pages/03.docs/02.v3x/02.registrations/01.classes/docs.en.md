---
title: Registering PHP classes and functions
menu: Registration
template: jaxon
---

Before a PHP class or function can be called from javascript, it must first be registered.
The `register()` function of Jaxon is used for that purpose.

#### Registering a class

A class is registered with Jaxon by calling the `register()` function with the `Jaxon::CALLABLE_CLASS` parameter.

```php
use Jaxon\Jaxon;
use Jaxon\Response\Response;

class HelloWorld
{
    public function sayHello($isCaps)
    {
        $response = new Response();
        $text = ($isCaps) ? 'HELLO WORLD!' : 'Hello World!';
        $response->assign('div2', 'innerHTML', $text);
        return $response;
    }

    public function setColor($sColor)
    {
        $response = new Response();
        $response->assign('div2', 'style.color', $sColor);
        return $response;
    }
}
```

```php
$jaxon = jaxon();
$jaxon->register(Jaxon::CALLABLE_CLASS, HelloWorld::class);
```

After the class is registered, all its public methods are available in a javascript class named `JaxonHelloWorld`.
The prefix `Jaxon` is defined using the `core.prefix.class` configuration option.

Here's the javascript code Jaxon will generate.

```javascript
JaxonHelloWorld = {};
JaxonHelloWorld.sayHello = function() {
    return jaxon.request(
        { jxncls: 'HelloWorld', jxnmthd: 'sayHello' },
        { parameters: arguments }
    );
};
JaxonHelloWorld.setColor = function() {
    return jaxon.request(
        { jxncls: 'HelloWorld', jxnmthd: 'setColor' },
        { parameters: arguments }
    );
};
```

Here's an example of HTML code that calls this class.

```html
<input type="button" value="Say Hello" onclick="JaxonHelloWorld.sayHello(0)" />
<input type="button" value="Set Color" onclick="JaxonHelloWorld.setColor('red')" />
```

#### Registering a function

A function is registered with Jaxon by calling the `register()` function with the `Jaxon::CALLABLE_FUNCTION` parameter.

```php
use Jaxon\Jaxon;
use Jaxon\Response\Response;

function hello_world($isCaps)
{
    $response = new Response();
    $text = ($isCaps) ? 'HELLO WORLD!' : 'Hello World!';
    $response->assign('div2', 'innerHTML', $text);
    return $response;
}

$jaxon->register(Jaxon::CALLABLE_FUNCTION, "hello_world");
```

After it is registered, the function can be called from javascript with the name `jaxon_hello_world()`.
The prefix `jaxon_` is defined using the `core.prefix.function` configuration option.

Here is an example of HTML code that calls the PHP function registered with Jaxon.

```html
<input type="button" value="Say Hello" onclick="jaxon_hello_world(0)" />
```

The javascript function name can be changed to an alias.

```php
$jaxon->register(Jaxon::CALLABLE_FUNCTION, "hello_world", ["alias" => "sayHello"]);
```

```html
<input type="button" value="Say Hello" onclick="jaxon_sayHello(0)" />
```

A method of a class can also be registered as a function.
In this case, the class name is passed to the `register()` call, as in the following example.

```php
use Jaxon\Jaxon;
use Jaxon\Response\Response;

class HelloWorld
{
    public function hello_world($isCaps)
    {
        $response = new Response();
        $text = ($isCaps) ? 'HELLO WORLD!' : 'Hello World!';
        $response->assign('div2', 'innerHTML', $text);
        return $response;
    }
}

$jaxon->register(Jaxon::CALLABLE_FUNCTION, "hello_world", ["class" => HelloWorld::class]);
```

```html
<input type="button" value="Say Hello" onclick="jaxon_hello_world(0)" />
```

An alias can also be defined.

```php
$jaxon->register(Jaxon::CALLABLE_FUNCTION, "hello_world", ["class" => HelloWorld::class, "alias" => "sayHello"]);
```

```html
<input type="button" value="Submit" onclick="jaxon_sayHello()" />
```

#### Setting options on Jaxon requests

Additional options can be passed to classes when they are registered, and included in generated javascript functions.
They allow to change the behavior of Jaxon requests, without changing the way they are called.

In practice, these options are included into the javascript functions generated by Jaxon.

```php
// Classes options
$jaxon->register(Jaxon::CALLABLE_CLASS, HelloWorld::class, [
    'setColor' => [
        'name' => "'value'"
    ],
    '*' => [
        'name' => "'value'"
    ]
]);
// Functions options
$jaxon->register(Jaxon::CALLABLE_FUNCTION, "hello_world", [
    'name' => "'value'"
]);
```

The options are defined in an array whose indexes are their names.
Note that when defining an option of type string, quotes are included in its value.

For classes, each option group is indexed by the name of the method they apply to, or by `*` if the options apply to all methods.

For example, the `mode` option indicates whether the Jaxon requests are asynchronous or not.

```php
$jaxon->register(Jaxon::CALLABLE_CLASS, HelloWorld::class, [
    'setColor' => [
        'mode' => "'synchronous'"
    ],
    '*' => [
        'mode' => "'asynchronous'"
    ]
]);
```

Here's the generated javascript code.

```js
JaxonHelloWorld.sayHello = function() {
    return jaxon.request(
        { jxncls: 'HelloWorld', jxnmthd: 'sayHello' },
        { parameters: arguments, mode: 'asynchronous' }
    );
};
JaxonHelloWorld.setColor = function() {
    return jaxon.request(
        { jxncls: 'HelloWorld', jxnmthd: 'setColor' },
        { parameters: arguments, mode: 'synchronous' }
    );
};
```
